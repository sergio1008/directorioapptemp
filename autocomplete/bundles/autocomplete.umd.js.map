{"version":3,"file":"autocomplete.umd.js.map","sources":["ng://autocomplete/lib/componentes/autocomplete/autocomplete.component.ts","ng://autocomplete/lib/autocomplete.module.ts"],"sourcesContent":["import { Component, OnInit, Input, SimpleChanges, OnDestroy, Output, EventEmitter } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { startWith, map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { GenericoAutoComplete } from '../../modelos/genericoAutocomplete';\r\n\r\n@Component({\r\n  selector: 'lib-autocomplete',\r\n  templateUrl: './autocomplete.component.html',\r\n  styleUrls: ['./autocomplete.component.css']\r\n})\r\nexport class AutocompleteComponent implements OnInit {\r\n\r\n  constructor(\r\n  ) { }\r\n  @Input() genericoAutocompletar: GenericoAutoComplete;\r\n  @Input() formulario: FormGroup;\r\n  @Input() label: string;\r\n  @Output() seleccion = new EventEmitter<any>();\r\n  requerido: boolean;\r\n  DatosFiltrados: Observable<any[]>;\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['genericoAutocompletar']) {\r\n      if (this.genericoAutocompletar) {\r\n        if(this.formulario.controls[this.label].validator(this.formulario.controls[this.label])){\r\n          this.requerido = this.formulario.controls[this.label].validator(this.formulario.controls[this.label]).required;\r\n        }else{\r\n          this.requerido = false\r\n        }\r\n        \r\n        this.DatosFiltrados = this.formulario.get(this.label).valueChanges.pipe(\r\n          startWith<string | any>(''),\r\n          map(value => typeof value === 'string' ? value : value[this.genericoAutocompletar.datoMostrar]),\r\n          map(Nombre => Nombre ? this.filtrarDato(Nombre) : this.genericoAutocompletar.datos)\r\n        );\r\n\r\n        if (this.genericoAutocompletar) {\r\n          if(this.genericoAutocompletar.deshabilitar === true){\r\n            this.formulario.controls[this.label].disable();\r\n          }\r\n        }\r\n        \r\n        if (this.genericoAutocompletar && this.genericoAutocompletar.idPrecargado) {\r\n          this.filtrarData();\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  mostrarDato(dato?: any): string | undefined {\r\n    return dato ? dato[this.genericoAutocompletar.datoMostrar] : undefined;\r\n  }\r\n\r\n  filtrarDato(val: string): any[] {\r\n    if (this.genericoAutocompletar.datos) {\r\n      return this.genericoAutocompletar.datos.filter(option =>\r\n        option[this.genericoAutocompletar.datoMostrar].toLowerCase().indexOf(val.toLowerCase()) === 0);\r\n    }\r\n  }\r\n\r\n  filtrarData() {\r\n    let datos = this.genericoAutocompletar.datos;\r\n    if (datos && this.genericoAutocompletar) {\r\n      let cargar = datos.find(dato => dato[this.genericoAutocompletar.filtroPrecargado] == this.genericoAutocompletar.idPrecargado);\r\n      this.formulario.get(this.label).setValue(cargar);\r\n    }\r\n  }\r\n\r\n  seleccionoOpcion(seleccion){\r\n    this.seleccion.emit(seleccion);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { AutocompleteComponent } from './componentes/autocomplete/autocomplete.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { MatButtonModule, MatIconModule, MatAutocompleteModule, MatSelectModule, MatInputModule, MatFormFieldModule } from '@angular/material';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  declarations: [AutocompleteComponent],\r\n  imports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    ReactiveFormsModule,\r\n    MatSelectModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatAutocompleteModule,\r\n  ],\r\n  exports: [AutocompleteComponent]\r\n})\r\nexport class AutocompleteModule { }\r\n"],"names":["EventEmitter","startWith","map","Component","Input","Output","NgModule","CommonModule","HttpClientModule","ReactiveFormsModule","MatSelectModule","MatFormFieldModule","MatInputModule","MatAutocompleteModule"],"mappings":"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"}
