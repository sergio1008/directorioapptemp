{"version":3,"file":"autocomplete.js.map","sources":["ng://autocomplete/lib/componentes/autocomplete/autocomplete.component.ts","ng://autocomplete/lib/autocomplete.module.ts"],"sourcesContent":["import { Component, OnInit, Input, SimpleChanges, OnDestroy, Output, EventEmitter } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { startWith, map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { GenericoAutoComplete } from '../../modelos/genericoAutocomplete';\r\n\r\n@Component({\r\n  selector: 'lib-autocomplete',\r\n  templateUrl: './autocomplete.component.html',\r\n  styleUrls: ['./autocomplete.component.css']\r\n})\r\nexport class AutocompleteComponent implements OnInit {\r\n\r\n  constructor(\r\n  ) { }\r\n  @Input() genericoAutocompletar: GenericoAutoComplete;\r\n  @Input() formulario: FormGroup;\r\n  @Input() label: string;\r\n  @Output() seleccion = new EventEmitter<any>();\r\n  requerido: boolean;\r\n  DatosFiltrados: Observable<any[]>;\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['genericoAutocompletar']) {\r\n      if (this.genericoAutocompletar) {\r\n        if(this.formulario.controls[this.label].validator(this.formulario.controls[this.label])){\r\n          this.requerido = this.formulario.controls[this.label].validator(this.formulario.controls[this.label]).required;\r\n        }else{\r\n          this.requerido = false\r\n        }\r\n        \r\n        this.DatosFiltrados = this.formulario.get(this.label).valueChanges.pipe(\r\n          startWith<string | any>(''),\r\n          map(value => typeof value === 'string' ? value : value[this.genericoAutocompletar.datoMostrar]),\r\n          map(Nombre => Nombre ? this.filtrarDato(Nombre) : this.genericoAutocompletar.datos)\r\n        );\r\n\r\n        if (this.genericoAutocompletar) {\r\n          if(this.genericoAutocompletar.deshabilitar === true){\r\n            this.formulario.controls[this.label].disable();\r\n          }\r\n        }\r\n        \r\n        if (this.genericoAutocompletar && this.genericoAutocompletar.idPrecargado) {\r\n          this.filtrarData();\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  mostrarDato(dato?: any): string | undefined {\r\n    return dato ? dato[this.genericoAutocompletar.datoMostrar] : undefined;\r\n  }\r\n\r\n  filtrarDato(val: string): any[] {\r\n    if (this.genericoAutocompletar.datos) {\r\n      return this.genericoAutocompletar.datos.filter(option =>\r\n        option[this.genericoAutocompletar.datoMostrar].toLowerCase().indexOf(val.toLowerCase()) === 0);\r\n    }\r\n  }\r\n\r\n  filtrarData() {\r\n    let datos = this.genericoAutocompletar.datos;\r\n    if (datos && this.genericoAutocompletar) {\r\n      let cargar = datos.find(dato => dato[this.genericoAutocompletar.filtroPrecargado] == this.genericoAutocompletar.idPrecargado);\r\n      this.formulario.get(this.label).setValue(cargar);\r\n    }\r\n  }\r\n\r\n  seleccionoOpcion(seleccion){\r\n    this.seleccion.emit(seleccion);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { AutocompleteComponent } from './componentes/autocomplete/autocomplete.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { MatButtonModule, MatIconModule, MatAutocompleteModule, MatSelectModule, MatInputModule, MatFormFieldModule } from '@angular/material';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  declarations: [AutocompleteComponent],\r\n  imports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    ReactiveFormsModule,\r\n    MatSelectModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatAutocompleteModule,\r\n  ],\r\n  exports: [AutocompleteComponent]\r\n})\r\nexport class AutocompleteModule { }\r\n"],"names":[],"mappings":"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"}
